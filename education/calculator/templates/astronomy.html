<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏—è</title>
    <script src="https://unpkg.com/three@0.132.2/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background-color: black; font-family: Arial, sans-serif; }
        canvas { display: block; }

        #info-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(86, 86, 86, 0.9);
            padding: 15px;
            border-radius: 10px;
            color: black;
            width: 320px;
            display: none;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        #info-panel img {
            width: 100%;
            border-radius: 10px;
            background: #888;
            padding: 5px;
        }

        #focus-panel {
            position: fixed;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            background: rgba(200, 200, 200, 0.9);
            padding: 15px;
            border-radius: 10px;
            color: black;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        button {
            background: white;
            color: black;
            border: none;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="info-panel">
        <img id="info-image" src="" alt="–ü–ª–∞–Ω–µ—Ç–∞">
        <h2 id="info-name"></h2>
        <p id="info-description"></p>
        <p><strong>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –°–æ–ª–Ω—Ü–∞:</strong> <span id="info-distance"></span> –º–ª–Ω –∫–º</p>
        <p><strong>–î–∏–∞–º–µ—Ç—Ä:</strong> <span id="info-diameter"></span> –∫–º</p>
        <p><strong>–°—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</strong> <span id="info-temperature"></span> ¬∞C</p>
    </div>

    <p class="mt-4 text-center text-gray-600"><a href="{% url 'index' %}" class="text-blue-500">üîô –ù–∞ –≥–ª–∞–≤–Ω—É—é</a></p>

    <div id="focus-panel"></div>

    <script>
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã, –∫–∞–º–µ—Ä—ã –∏ —Ä–µ–Ω–¥–µ—Ä–∞
        const scene = new THREE.Scene();

        // –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–∞–º–µ—Ä–∞ —Å –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º FOV –∏ –≥–ª—É–±–∏–Ω–æ–π
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 20000);
        camera.position.set(0, 300, 1000); // –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ

        // –£–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–µ—Ä —Å –∞–Ω—Ç–∏–∞–ª–∏–∞—Å–∏–Ω–≥–æ–º –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true; // –í–∫–ª—é—á–∞–µ–º —Ç–µ–Ω–∏
        renderer.shadowMap.type = THREE.PCFSoftShadowMap; // –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ç–µ–Ω–∏
        renderer.toneMapping = THREE.ACESFilmicToneMapping; // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á–∞
        renderer.outputEncoding = THREE.sRGBEncoding; // –ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ü–≤–µ—Ç–æ–≤
        document.body.appendChild(renderer.domElement);

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ä–µ–Ω–¥–µ—Ä–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });


        // –£–ª—É—á—à–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π (OrbitControls)
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(0, 250, 1200); // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
        controls.target.set(0, 0, 0);
        controls.enableDamping = true; // –ü–ª–∞–≤–Ω–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
        controls.dampingFactor = 0.05;
        controls.autoRotate = true; // –ê–≤—Ç–æ-–≤—Ä–∞—â–µ–Ω–∏–µ
        controls.autoRotateSpeed = 0.2;
        controls.minDistance = 200; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∫–∞–º–µ—Ä—ã
        controls.maxDistance = 5000; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
        controls.maxPolarAngle = Math.PI / 2; // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞–∫–ª–æ–Ω–∞ –≤–Ω–∏–∑

        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.3); // –ú—è–≥–∫–∏–π –∑–∞–ø–æ–ª–Ω—è—é—â–∏–π —Å–≤–µ—Ç
        scene.add(ambientLight);

        // –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–≤–µ—Ç–∞ (–°–æ–ª–Ω—Ü–µ)
        const sunLight = new THREE.PointLight(0xffffff, 2, 10000, 2); // decay = 2 –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞—Ç—É—Ö–∞–Ω–∏—è
        sunLight.position.set(0, 0, 0);
        sunLight.castShadow = true;
        sunLight.shadow.mapSize.width = 2048;
        sunLight.shadow.mapSize.height = 2048;
        scene.add(sunLight);

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–≤–µ—Ç –¥–ª—è —Ç–µ–Ω–µ–π
        const dirLight = new THREE.DirectionalLight(0xffffff, 0.5);
        dirLight.position.set(5, 10, 2);
        dirLight.castShadow = true;
        scene.add(dirLight);


        const planets = {}; // –û–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–ª–∞–Ω–µ—Ç–∞—Ö
        let focusedPlanet = null; // –í—ã–±—Ä–∞–Ω–Ω–∞—è –ø–ª–∞–Ω–µ—Ç–∞

        const planetData = [
        {
            name: 'Mercury',
            size: 5,
            distance: 80,
            orbitSpeed: 4.15,
            color: 0xaaaaaa,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/18_mercury_new.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/mercury.glb',
            description: '–ë–ª–∏–∂–∞–π—à–∞—è –∫ –°–æ–ª–Ω—Ü—É –ø–ª–∞–Ω–µ—Ç–∞.',
            diameter: 4879,
            temperature: 167,
            gravity: 3.7,
            dayLength: 4222.6, // –í —á–∞—Å–∞—Ö
            moons: []
        },
        {
            name: 'Venus',
            size: 10,
            distance: 120,
            orbitSpeed: 1.62,
            color: 0xffaa33,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/27_venus_jg.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/venus.glb',
            description: '–í—Ç–æ—Ä–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –æ—Ç –°–æ–ª–Ω—Ü–∞.',
            diameter: 12104,
            temperature: 464,
            gravity: 8.87,
            dayLength: 2802, // –í —á–∞—Å–∞—Ö
            moons: []
        },
        {
            name: 'Earth',
            size: 12,
            distance: 160,
            orbitSpeed: 1,
            color: 0x3399ff,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/17_earth.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/earth.glb',
            description: '–ù–∞—à –¥–æ–º.',
            diameter: 12742,
            temperature: 15,
            gravity: 9.81,
            dayLength: 24,
            moons: ['–õ—É–Ω–∞']
        },
        {
            name: 'Mars',
            size: 8,
            distance: 220,
            orbitSpeed: 0.53,
            color: 0xff3300,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/19_mars.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/mars.glb',
            description: '–ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞–Ω–µ—Ç–∞.',
            diameter: 6779,
            temperature: -63,
            gravity: 3.71,
            dayLength: 24.6,
            moons: ['–§–æ–±–æ—Å', '–î–µ–π–º–æ—Å']
        },
        {
            name: 'Jupiter',
            size: 30,
            distance: 320,
            orbitSpeed: 0.084,
            color: 0xff9933,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/16_jupiter_new.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/jupiter.glb',
            description: '–ö—Ä—É–ø–Ω–µ–π—à–∞—è –ø–ª–∞–Ω–µ—Ç–∞.',
            diameter: 139820,
            temperature: -145,
            gravity: 24.79,
            dayLength: 9.9,
            moons: ['–ò–æ', '–ï–≤—Ä–æ–ø–∞', '–ì–∞–Ω–∏–º–µ–¥', '–ö–∞–ª–ª–∏—Å—Ç–æ', '–∏ –µ—â–µ 75']
        },
        {
            name: 'Saturn',
            size: 28,
            distance: 420,
            orbitSpeed: 0.034,
            color: 0xffcc99,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/28_saturn.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/saturn.glb',
            description: '–ü–ª–∞–Ω–µ—Ç–∞ —Å –∫–æ–ª—å—Ü–∞–º–∏.',
            diameter: 116460,
            temperature: -178,
            gravity: 10.44,
            dayLength: 10.7,
            moons: ['–¢–∏—Ç–∞–Ω', '–≠–Ω—Ü–µ–ª–∞–¥', '–ú–∏–º–∞—Å', '–¢–µ—Ñ–∏—è', '–î–∏–æ–Ω', '–†–µ—è', '–Ø–ø–µ—Ç', '–∏ –µ—â–µ 80'],
            hasRings: true
        },
        {
            name: 'Uranus',
            size: 20,
            distance: 520,
            orbitSpeed: 0.012,
            color: 0x99ccff,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/29_uranus.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/uranus.glb',
            description: '–õ–µ–¥—è–Ω–æ–π –≥–∏–≥–∞–Ω—Ç.',
            diameter: 50724,
            temperature: -224,
            gravity: 8.69,
            dayLength: 17.2,
            moons: ['–ú–∏—Ä–∞–Ω–¥–∞', '–ê—Ä–∏—ç–ª—å', '–£–º–±—Ä–∏—ç–ª—å', '–¢–∏—Ç–∞–Ω–∏—è', '–û–±–µ—Ä–∞–Ω', '–¢–µ–º–ø–µ—Å—Ç', '–∏ –µ—â–µ 22'],
        },
        {
            name: 'Neptune',
            size: 18,
            distance: 620,
            orbitSpeed: 0.006,
            color: 0x3333ff,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/30_neptune.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/neptune.glb',
            description: '–î–∞–ª—å–Ω—è—è –ø–ª–∞–Ω–µ—Ç–∞.',
            diameter: 49244,
            temperature: -218,
            gravity: 11.15,
            dayLength: 16.1,
            moons: ['–¢—Ä–∏—Ç–æ–Ω', '–ü—Ä–æ—Ç–µ–π', '–ù–µ—Ä–µ–∏–¥–∞', '–õ–∞—Ä–∏—Å–∞', '–¢–∞–ª–∞—Å—Å–∞', '–î–µ—Å–ø–∏–Ω–∞', '–∏ –µ—â–µ 12'],
        },
        {
            name: 'Pluto', // –ö–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞
            size: 2,
            distance: 820,
            orbitSpeed: 0.004,
            color: 0x999999,
            img: 'https://solarsystem.nasa.gov/system/feature_items/images/40_pluto.png',
            modelUrl: 'https://raw.githubusercontent.com/2ndVariety/3d-models/master/planets/pluto.glb',
            description: '–ö–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞, —Ä–∞–Ω–µ–µ —Å—á–∏—Ç–∞–≤—à–∞—è—Å—è –¥–µ–≤—è—Ç–æ–π.',
            diameter: 2376,
            temperature: -229,
            gravity: 0.62,
            dayLength: 153.3,
            moons: ['–•–∞—Ä–æ–Ω', '–ù–∏–∫—Å', '–ì–∏–¥—Ä–∞', '–ö–µ—Ä–±–µ—Ä–æ—Å', '–°—Ç–∏–∫—Å']
        }
    ];


        console.log(planetData);

        const sunTexture = new THREE.TextureLoader().load('https://upload.wikimedia.org/wikipedia/commons/2/28/Sun_Symbol.png');
        const sunMaterial = new THREE.MeshStandardMaterial({
            emissive: 0xffff00,
            emissiveIntensity: 2,
            map: sunTexture
        });

        const sunGeometry = new THREE.SphereGeometry(50, 32, 32);
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç
        planetData.forEach(data => {
            const geometry = new THREE.SphereGeometry(data.size, 32, 32);
            const material = new THREE.MeshStandardMaterial({ color: data.color });
            const planet = new THREE.Mesh(geometry, material);
            scene.add(planet);

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª—å—Ü–∞, –µ—Å–ª–∏ –µ—Å—Ç—å
            if (data.hasRings) {
                createRings(planet, data.size * 1.5, data.size * 2, 0xaaaaaa);
            }

            planets[data.name] = {
                mesh: planet,
                distance: data.distance,
                orbitSpeed: data.orbitSpeed,
                angle: Math.random() * Math.PI * 2,
                info: data
            };

            // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–ª—è —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏
            createFocusButton(data.name);
        });

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–ª–µ—Ü –≤–æ–∫—Ä—É–≥ –ø–ª–∞–Ω–µ—Ç—ã
        function createRings(planet, innerRadius, outerRadius, color) {
            const ringGeometry = new THREE.RingGeometry(innerRadius, outerRadius, 64);
            const ringMaterial = new THREE.MeshBasicMaterial({ color, side: THREE.DoubleSide });
            const ring = new THREE.Mesh(ringGeometry, ringMaterial);
            ring.rotation.x = Math.PI / 2; // –ù–∞–∫–ª–æ–Ω—è–µ–º –∫–æ–ª—å—Ü–æ
            planet.add(ring);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏
        function createFocusButton(name) {
            const button = document.createElement('button');
            button.innerText = name;
            button.classList.add('focus-button'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Å—Ç–∏–ª–µ–π
            button.onclick = () => focusOnPlanet(name);
            document.getElementById('focus-panel').appendChild(button);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞–Ω–µ—Ç–µ
        function showInfo(name) {
            const info = planets[name].info;
            document.getElementById('info-image').src = info.img;
            document.getElementById('info-name').innerText = `üåç ${info.name}`;
            document.getElementById('info-description').innerText = `üìú ${info.description}`;
            document.getElementById('info-distance').innerText = `üìè –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${info.distance} –º–ª–Ω –∫–º`;
            document.getElementById('info-diameter').innerText = `‚ö™ –î–∏–∞–º–µ—Ç—Ä: ${info.diameter} –∫–º`;
            document.getElementById('info-temperature').innerText = `üå° –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${info.temperature}¬∞C`;
            document.getElementById('info-panel').style.display = 'block';
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CSS-—Å—Ç–∏–ª–µ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
        const style = document.createElement('style');
        style.innerHTML = `
            .focus-button {
                margin: 5px;
                padding: 8px 15px;
                background: #333;
                color: white;
                border: none;
                cursor: pointer;
                border-radius: 5px;
                transition: 0.3s;
            }
            .focus-button:hover {
                background: #555;
            }
        `;
        document.head.appendChild(style);

        

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏ –∫–∞–º–µ—Ä—ã –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–ª–∞–Ω–µ—Ç–µ
        function focusOnPlanet(name) {
            showInfo(name);
            focusedPlanet = planets[name];
        }

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–≤–µ–∑–¥–Ω–æ–≥–æ —Ñ–æ–Ω–∞
        function generateStars() {
            const starGeometry = new THREE.BufferGeometry();
            const starVertices = [];
            const starColors = [];

            for (let i = 0; i < 5000; i++) {
                const x = (Math.random() - 0.5) * 8000;
                const y = (Math.random() - 0.5) * 8000;
                const z = (Math.random() - 0.5) * 8000;
                starVertices.push(x, y, z);

                const colors = [0xffffff, 0xffd700, 0xadd8e6, 0xff4500];
                const color = new THREE.Color(colors[Math.floor(Math.random() * colors.length)]);
                starColors.push(color.r, color.g, color.b);
            }

            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            starGeometry.setAttribute('color', new THREE.Float32BufferAttribute(starColors, 3));

            const starMaterial = new THREE.PointsMaterial({ 
                vertexColors: true, 
                size: 1.5, 
                transparent: true, 
                opacity: 0.9 
            });

            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);

            // –ê–Ω–∏–º–∞—Ü–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è –∑–≤–µ–∑–¥
            function animateStars() {
                starMaterial.opacity = 0.8 + Math.sin(Date.now() * 0.001) * 0.2;
                requestAnimationFrame(animateStars);
            }
            animateStars();

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ú–ª–µ—á–Ω–æ–≥–æ –ü—É—Ç–∏
            const milkyWayGeometry = new THREE.BufferGeometry();
            const milkyWayVertices = [];
            const milkyWayColors = [];

            for (let i = 0; i < 8000; i++) {
                const angle = Math.random() * Math.PI * 2;
                const radius = Math.random() * 4000 + 2000;
                const x = Math.cos(angle) * radius;
                const y = (Math.random() - 0.5) * 300;
                const z = Math.sin(angle) * radius;
                milkyWayVertices.push(x, y, z);

                const color = new THREE.Color(1, 1, Math.random() * 0.5 + 0.5);
                milkyWayColors.push(color.r, color.g, color.b);
            }

            milkyWayGeometry.setAttribute('position', new THREE.Float32BufferAttribute(milkyWayVertices, 3));
            milkyWayGeometry.setAttribute('color', new THREE.Float32BufferAttribute(milkyWayColors, 3));

            const milkyWayMaterial = new THREE.PointsMaterial({ 
                vertexColors: true, 
                size: 1.2, 
                transparent: true, 
                opacity: 0.5 
            });

            const milkyWay = new THREE.Points(milkyWayGeometry, milkyWayMaterial);
            scene.add(milkyWay);

            // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–¥–∞—é—â–µ–π –∑–≤–µ–∑–¥—ã (–∫–æ–º–µ—Ç—ã)
            function createFallingStar() {
                const cometGeometry = new THREE.SphereGeometry(3, 16, 16);
                const cometMaterial = new THREE.MeshBasicMaterial({ color: 0xfff4e5 });
                const comet = new THREE.Mesh(cometGeometry, cometMaterial);

                comet.position.set((Math.random() - 0.5) * 5000, 2000, (Math.random() - 0.5) * 5000);
                scene.add(comet);

                // –°–æ–∑–¥–∞–Ω–∏–µ —Ö–≤–æ—Å—Ç–∞ –∫–æ–º–µ—Ç—ã
                const tailGeometry = new THREE.BufferGeometry();
                const tailMaterial = new THREE.LineBasicMaterial({ color: 0xffcc99, transparent: true, opacity: 0.8 });
                const tail = new THREE.Line(tailGeometry, tailMaterial);
                scene.add(tail);

                let tailPositions = [comet.position.x, comet.position.y, comet.position.z];

                function animateFall() {
                    if (comet.position.y > -2000) {
                        comet.position.y -= 25;
                        comet.position.x += Math.random() * 10 - 5;
                        comet.position.z += Math.random() * 10 - 5;

                        tailPositions.push(comet.position.x, comet.position.y, comet.position.z);
                        if (tailPositions.length > 30) tailPositions.shift(); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É —Ö–≤–æ—Å—Ç–∞

                        tailGeometry.setAttribute('position', new THREE.Float32BufferAttribute(tailPositions, 3));

                        requestAnimationFrame(animateFall);
                    } else {
                        scene.remove(comet);
                        scene.remove(tail);
                    }
                }
                animateFall();
            }
            setInterval(createFallingStar, Math.random() * 15000 + 15000); // –†–∞–∑ –≤ 15-30 —Å–µ–∫
        }

        generateStars();

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–ª–∞–Ω–µ—Ç –∏ –∫–∞–º–µ—Ä—ã
        function animate() {
            requestAnimationFrame(animate);

            for (let name in planets) {
                let planet = planets[name];
                planet.angle += planet.orbitSpeed * 0.005;
                planet.mesh.position.x = Math.cos(planet.angle) * planet.distance;
                planet.mesh.position.z = Math.sin(planet.angle) * planet.distance;

                // –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–ª–∞–Ω–µ—Ç–µ
                if (focusedPlanet === planet) {
                    const targetPosition = planet.mesh.position.clone().add(new THREE.Vector3(0, 50, 200));
                    camera.position.lerp(targetPosition, 0.05);
                    controls.target.lerp(planet.mesh.position, 0.05);
                    camera.lookAt(planet.mesh.position);
                }
            }

            controls.update();
            renderer.render(scene, camera);
        }
        animate();


    </script>
</body>
</html>
