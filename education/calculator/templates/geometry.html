<html><head></head><body>{% extends "base.html" %}
    {% load static %}
    
    {% block title %}–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–≥—É—Ä{% endblock %}
    
    {% block content %}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.6.4/math.min.js"></script>
        <style>
              
              .container {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                padding: 20px;
              }
              
              .calculator,
              .canvas-container {
                background-color:var(--bg-color);
                border-radius: 12px;
                padding: 25px;
                margin: 10px;
              }
              
              .calculator {
                flex: 1 1 0;
                max-width: 350px;
              }
              
              .canvas-container {
                flex: 2 1 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                min-width: 400px;
              }
              
              canvas {
                border: 2px solid;
                border-radius: 8px;
                background-color: #ffffff;
                margin-top: 10px;
              }
              
              input,
              select,
              button {
                margin: 10px 0;
                padding: 12px;
                font-size: 16px;
                width: 100%;
                border: 1px solid;
                border-radius: 8px;
                transition: border-color 0.3s, box-shadow 0.3s;
                background-color: var(--button-bg);
              }
              
              input:focus,
              select:focus {
                box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
                outline: none;
              }
              
              h1,
              h2,
              h3 {
                text-align: center;
              }
              
              h1 {
                font-size: 2.5rem;
                margin-bottom: 20px;
                position: relative;
                top: 31px;
                left: 0%;
             }
              
              h2 {
                font-size: 1.8rem;
                margin-bottom: 15px;
              }
              
              .solution {
                margin-top: 20px;
                padding: 15px;
                background-color: var(--bg-color);
                border-radius: 8px;
                font-size: 16px;
                line-height: 1.5;
              }
              
              .solution strong {
                /* Add styles if needed */
              }
              
              .form-group {
                margin-bottom: 15px;
              }
              
              .form-group label {
                display: block;
                font-weight: 600;
                margin-bottom: 5px;
              }
              
              .buttons-container {
                display: flex;
                margin-top: 20px;
              }
              
              .buttons-container button {
                flex: 1 1 0;
              }
        
                /* –£–±–æ—Ä–∫–∞ –ª–∏—à–Ω–∏—Ö —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã SVG */
                .center-line {
                    display: none;
                }  
        
                .title-container {
                    display: none;
                }
        
                .paragraph-container {
                    display: none;
                }
        
                .h2 {
                    display: none;
                }
        
                .h3 {
                    display: none;
                }
        
                #character-container {
                    display: none;
                }
        
                .svg-container {
                    display: none;
                }
        </style>
    
        <h1>–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–≥—É—Ä</h1>
    
        <div class="container">
            <div class="calculator">
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–≥—É—Ä—É</h2>
                <select id="shape" onchange="showForm(); drawShape();">
                    <option value="triangle">–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫</option>
                    <option value="rectangle">–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫</option>
                    <option value="square">–ö–≤–∞–¥—Ä–∞—Ç</option>
                    <option value="circle">–ö—Ä—É–≥</option>
                    <option value="trapezoid">–¢—Ä–∞–ø–µ—Ü–∏—è</option>
                    <option value="rhombus">–†–æ–º–±</option>
                    <option value="parallelogram">–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º</option>
                </select>
    
                <div id="form-container" class="form-group"></div>
    
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –≤—ã—á–∏—Å–ª–∏—Ç—å</h2>
                <select id="calculation"></select>
    
                <div class="buttons-container">
                    <button onclick="calculate()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                    <button onclick="drawShape()">–û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å</button>
                </div>

                <a href="{% url 'index' %}" class="button">üìö –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    
                <div id="solution" class="solution"></div>
            </div>
    
            <div class="canvas-container">
                <h2>–†–∏—Å—É–Ω–æ–∫</h2>
                <canvas id="canvas" width="400" height="400"></canvas>
            </div>
        </div>
    
        <script>
            function alignToGrid(value) {
                return Math.round(value / 20) * 20;
            }
    
            function drawGrid(ctx) {
                ctx.strokeStyle = "#1085c9";
                ctx.lineWidth = 1;
                for (let x = 0; x <= 400; x += 20) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, 400);
                    ctx.stroke();
                }
                for (let y = 0; y <= 400; y += 20) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(400, y);
                    ctx.stroke();
                }
    
                ctx.fillStyle = "#e0e0e0";
                for (let x = 0; x <= 400; x += 20) {
                    for (let y = 0; y <= 400; y += 20) {
                        ctx.beginPath();
                        ctx.arc(x, y, 2, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                }
            }
    
            function drawShape() {
                const canvas = document.getElementById("canvas");
                const ctx = canvas.getContext("2d");
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                drawGrid(ctx);
    
                const shape = document.getElementById("shape").value;
                const centerX = alignToGrid(200);
                const centerY = alignToGrid(200);
    
                try {
                    switch(shape) {
                        case 'triangle': {
                            const a = alignToGrid(parseFloat(document.getElementById("a").value));
                            const h = alignToGrid(parseFloat(document.getElementById("h").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.beginPath();
                            ctx.moveTo(centerX - a/2, centerY + h/2);
                            ctx.lineTo(centerX + a/2, centerY + h/2);
                            ctx.lineTo(centerX, centerY - h/2);
                            ctx.closePath();
                            ctx.stroke();
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#ff4444";
                            ctx.beginPath();
                            ctx.moveTo(centerX, centerY - h/2);
                            ctx.lineTo(centerX, centerY + h/2);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–í—ã—Å–æ—Ç–∞", centerX + 10, centerY);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`a = ${a}`, centerX - a/2 + 10, centerY + h/2 + 20);
                            ctx.fillText(`b = ${a}`, centerX + a/2 - 50, centerY + h/2 + 20);
                            ctx.fillText(`c = ${a}`, centerX, centerY - h/2 - 10);
    
                            break;
                        }
                        
                        case 'rectangle': {
                            const width = alignToGrid(parseFloat(document.getElementById("width").value));
                            const height = alignToGrid(parseFloat(document.getElementById("height").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.strokeRect(centerX - width/2, centerY - height/2, width, height);
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#ff8000";
                            ctx.beginPath();
                            ctx.moveTo(centerX - width/2, centerY - height/2);
                            ctx.lineTo(centerX + width/2, centerY + height/2);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–î–∏–∞–≥–æ–Ω–∞–ª—å", centerX + width/4, centerY - height/4);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`–®–∏—Ä–∏–Ω–∞ = ${width}`, centerX - width/2 + 10, centerY + height/2 + 20);
                            ctx.fillText(`–í—ã—Å–æ—Ç–∞ = ${height}`, centerX + width/2 + 10, centerY);
    
                            break;
                        }
                        
                        case 'square': {
                            const side = alignToGrid(parseFloat(document.getElementById("side").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.strokeRect(centerX - side/2, centerY - side/2, side, side);
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#aa00ff";
                            ctx.beginPath();
                            ctx.moveTo(centerX - side/2, centerY - side/2);
                            ctx.lineTo(centerX + side/2, centerY + side/2);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–î–∏–∞–≥–æ–Ω–∞–ª—å", centerX + side/4, centerY - side/4);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`–°—Ç–æ—Ä–æ–Ω–∞ = ${side}`, centerX - side/2 + 10, centerY + side/2 + 20);
    
                            break;
                        }
                        
                        case 'circle': {
                            const radius = alignToGrid(parseFloat(document.getElementById("radius").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.beginPath();
                            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
                            ctx.stroke();
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#0066ff";
                            ctx.beginPath();
                            ctx.moveTo(centerX, centerY);
                            ctx.lineTo(centerX + radius, centerY);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–†–∞–¥–∏—É—Å", centerX + radius/2, centerY + 10);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`–†–∞–¥–∏—É—Å = ${radius}`, centerX - radius, centerY - radius - 10);
    
                            break;
                        }
                        
                        case 'trapezoid': {
                            const a = alignToGrid(parseFloat(document.getElementById("a").value));
                            const b = alignToGrid(parseFloat(document.getElementById("b").value));
                            const h = alignToGrid(parseFloat(document.getElementById("h").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.beginPath();
                            ctx.moveTo(centerX - b/2, centerY + h/2);
                            ctx.lineTo(centerX + b/2, centerY + h/2);
                            ctx.lineTo(centerX + a/2, centerY - h/2);
                            ctx.lineTo(centerX - a/2, centerY - h/2);
                            ctx.closePath();
                            ctx.stroke();
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#00aa00";
                            ctx.beginPath();
                            ctx.moveTo(centerX, centerY + h/2);
                            ctx.lineTo(centerX, centerY - h/2);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–í—ã—Å–æ—Ç–∞", centerX + 10, centerY);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`a = ${a}`, centerX - a/2 + 10, centerY - h/2 - 10);
                            ctx.fillText(`b = ${b}`, centerX - b/2 + 10, centerY + h/2 + 20);
    
                            break;
                        }
                        
                        case 'rhombus': {
                            const d1 = alignToGrid(parseFloat(document.getElementById("d1").value));
                            const d2 = alignToGrid(parseFloat(document.getElementById("d2").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.beginPath();
                            ctx.moveTo(centerX, centerY - d2/2);
                            ctx.lineTo(centerX + d1/2, centerY);
                            ctx.lineTo(centerX, centerY + d2/2);
                            ctx.lineTo(centerX - d1/2, centerY);
                            ctx.closePath();
                            ctx.stroke();
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#00aaaa";
                            ctx.beginPath();
                            ctx.moveTo(centerX - d1/2, centerY);
                            ctx.lineTo(centerX + d1/2, centerY);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–î–∏–∞–≥–æ–Ω–∞–ª—å", centerX + d1/4, centerY + 10);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`d1 = ${d1}`, centerX - d1/2, centerY + d2/2 + 20);
                            ctx.fillText(`d2 = ${d2}`, centerX + d1/2 + 10, centerY);
    
                            break;
                        }
                        
                        case 'parallelogram': {
                            const base = alignToGrid(parseFloat(document.getElementById("base").value));
                            const height = alignToGrid(parseFloat(document.getElementById("height").value));
                            
                            ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                            ctx.shadowBlur = 10;
                            ctx.shadowOffsetX = 5;
                            ctx.shadowOffsetY = 5;
    
                            ctx.beginPath();
                            ctx.moveTo(centerX - base/2, centerY - height/2);
                            ctx.lineTo(centerX + base/2, centerY - height/2);
                            ctx.lineTo(centerX + base/2 - 20, centerY + height/2);
                            ctx.lineTo(centerX - base/2 - 20, centerY + height/2);
                            ctx.closePath();
                            ctx.stroke();
    
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
    
                            ctx.strokeStyle = "#ff00aa";
                            ctx.beginPath();
                            ctx.moveTo(centerX - base/2, centerY - height/2);
                            ctx.lineTo(centerX - base/2 - 20, centerY + height/2);
                            ctx.stroke();
    
                            ctx.fillStyle = "#4a90e2";
                            ctx.font = "14px Arial";
                            ctx.fillText("–í—ã—Å–æ—Ç–∞", centerX - base/2 - 30, centerY);
    
                            ctx.fillStyle = "#2d3748";
                            ctx.fillText(`–û—Å–Ω–æ–≤–∞–Ω–∏–µ = ${base}`, centerX - base/2 + 10, centerY - height/2 - 10);
                            ctx.fillText(`–í—ã—Å–æ—Ç–∞ = ${height}`, centerX + base/2 + 10, centerY);
    
                            break;
                        }
                    }
                    ctx.strokeStyle = "#4a90e2";
                } catch(e) {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏–∏:", e);
                }
            }
    
            function showForm() {
                const shape = document.getElementById("shape").value;
                let formHtml = "";
                let calculationOptions = "";
    
                switch(shape) {
                    case 'triangle':
                        formHtml = `
                            <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="100"></label>
                            <label>–°—Ç–æ—Ä–æ–Ω–∞ b: <input type="number" id="b" value="80"></label>
                            <label>–°—Ç–æ—Ä–æ–Ω–∞ c: <input type="number" id="c" value="60"></label>
                            <label>–í—ã—Å–æ—Ç–∞ h: <input type="number" id="h" value="50"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                            <option value="height">–í—ã—Å–æ—Ç–∞</option>
                            <option value="median">–ú–µ–¥–∏–∞–Ω–∞</option>
                        `;
                        break;
                    
                    case 'rectangle':
                        formHtml = `
                            <label>–®–∏—Ä–∏–Ω–∞: <input type="number" id="width" value="120"></label>
                            <label>–í—ã—Å–æ—Ç–∞: <input type="number" id="height" value="80"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                            <option value="diagonal">–î–∏–∞–≥–æ–Ω–∞–ª—å</option>
                        `;
                        break;
                    
                    case 'square':
                        formHtml = `
                            <label>–°—Ç–æ—Ä–æ–Ω–∞: <input type="number" id="side" value="100"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                            <option value="diagonal">–î–∏–∞–≥–æ–Ω–∞–ª—å</option>
                        `;
                        break;
                    
                    case 'circle':
                        formHtml = `
                            <label>–†–∞–¥–∏—É—Å: <input type="number" id="radius" value="50"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="circumference">–î–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏</option>
                        `;
                        break;
                    
                    case 'trapezoid':
                        formHtml = `
                            <label>–û—Å–Ω–æ–≤–∞–Ω–∏–µ a: <input type="number" id="a" value="140"></label>
                            <label>–û—Å–Ω–æ–≤–∞–Ω–∏–µ b: <input type="number" id="b" value="100"></label>
                            <label>–í—ã—Å–æ—Ç–∞ h: <input type="number" id="h" value="60"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                            <option value="midline">–°—Ä–µ–¥–Ω—è—è –ª–∏–Ω–∏—è</option>
                        `;
                        break;
                    
                    case 'rhombus':
                        formHtml = `
                            <label>–î–∏–∞–≥–æ–Ω–∞–ª—å 1: <input type="number" id="d1" value="100"></label>
                            <label>–î–∏–∞–≥–æ–Ω–∞–ª—å 2: <input type="number" id="d2" value="80"></label>
                            <label>–°—Ç–æ—Ä–æ–Ω–∞: <input type="number" id="side" value="60"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                            <option value="height">–í—ã—Å–æ—Ç–∞</option>
                        `;
                        break;
                    
                    case 'parallelogram':
                        formHtml = `
                            <label>–û—Å–Ω–æ–≤–∞–Ω–∏–µ: <input type="number" id="base" value="120"></label>
                            <label>–í—ã—Å–æ—Ç–∞: <input type="number" id="height" value="80"></label>
                            <label>–°—Ç–æ—Ä–æ–Ω–∞: <input type="number" id="side" value="60"></label>
                        `;
                        calculationOptions = `
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                            <option value="height">–í—ã—Å–æ—Ç–∞</option>
                        `;
                        break;
                }
    
                document.getElementById("form-container").innerHTML = formHtml;
                document.getElementById("calculation").innerHTML = calculationOptions;
            }
    
            function calculate() {
                const shape = document.getElementById("shape").value;
                const calculation = document.getElementById("calculation").value;
                let solution = "";
    
                try {
                    switch(shape) {
                        case 'triangle': {
                            const a = parseFloat(document.getElementById("a").value);
                            const b = parseFloat(document.getElementById("b").value);
                            const c = parseFloat(document.getElementById("c").value);
                            const h = parseFloat(document.getElementById("h").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = ¬Ω * a * h = ¬Ω * ${a} * ${h} = ${0.5 * a * h}`;
                                    break;
                                case 'perimeter':
                                    solution = `P = a + b + c = ${a} + ${b} + ${c} = ${a + b + c}`;
                                    break;
                                case 'height':
                                    solution = `h = (2 * S)/a = (2 * ${0.5 * a * h})/${a} = ${h}`;
                                    break;
                                case 'median':
                                    const median = 0.5 * Math.sqrt(2*b**2 + 2*c**2 - a**2);
                                    solution = `M = ¬Ω‚àö(2b¬≤ + 2c¬≤ - a¬≤) = ${median}`;
                                    break;
                            }
                            break;
                        }
                        
                        case 'rectangle': {
                            const width = parseFloat(document.getElementById("width").value);
                            const height = parseFloat(document.getElementById("height").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = width * height = ${width} * ${height} = ${width * height}`;
                                    break;
                                case 'perimeter':
                                    solution = `P = 2*(width + height) = 2*(${width} + ${height}) = ${2*(width + height)}`;
                                    break;
                                case 'diagonal':
                                    solution = `d = ‚àö(width¬≤ + height¬≤) = ${Math.sqrt(width**2 + height**2)}`;
                                    break;
                            }
                            break;
                        }
                        
                        case 'square': {
                            const side = parseFloat(document.getElementById("side").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = side¬≤ = ${side}¬≤ = ${side**2}`;
                                    break;
                                case 'perimeter':
                                    solution = `P = 4*side = 4*${side} = ${4*side}`;
                                    break;
                                case 'diagonal':
                                    solution = `d = side‚àö2 = ${side * Math.sqrt(2)}`;
                                    break;
                            }
                            break;
                        }
                        
                        case 'circle': {
                            const radius = parseFloat(document.getElementById("radius").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = œÄr¬≤ = œÄ*${radius}¬≤ ‚âà ${Math.PI * radius**2}`;
                                    break;
                                case 'circumference':
                                    solution = `C = 2œÄr = 2œÄ*${radius} ‚âà ${2 * Math.PI * radius}`;
                                    break;
                            }
                            break;
                        }
                        
                        case 'trapezoid': {
                            const a_t = parseFloat(document.getElementById("a").value);
                            const b_t = parseFloat(document.getElementById("b").value);
                            const h_t = parseFloat(document.getElementById("h").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = ¬Ω*(a + b)*h = ¬Ω*(${a_t} + ${b_t})*${h_t} = ${0.5*(a_t + b_t)*h_t}`;
                                    break;
                                case 'perimeter':
                                    const side_t = Math.sqrt(((b_t - a_t)/2)**2 + h_t**2);
                                    solution = `P = a + b + 2*side = ${a_t} + ${b_t} + 2*${side_t} ‚âà ${a_t + b_t + 2*side_t}`;
                                    break;
                                case 'midline':
                                    solution = `M = ¬Ω*(a + b) = ¬Ω*(${a_t} + ${b_t}) = ${0.5*(a_t + b_t)}`;
                                    break;
                            }
                            break;
                        }
                        
                        case 'rhombus': {
                            const d1 = parseFloat(document.getElementById("d1").value);
                            const d2 = parseFloat(document.getElementById("d2").value);
                            const side_r = parseFloat(document.getElementById("side").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = ¬Ω*d1*d2 = ¬Ω*${d1}*${d2} = ${0.5*d1*d2}`;
                                    break;
                                case 'perimeter':
                                    solution = `P = 4*side = 4*${side_r} = ${4*side_r}`;
                                    break;
                                case 'height':
                                    solution = `h = S / side = ${0.5*d1*d2} / ${side_r} ‚âà ${(0.5*d1*d2)/side_r}`;
                                    break;
                            }
                            break;
                        }
                        
                        case 'parallelogram': {
                            const base = parseFloat(document.getElementById("base").value);
                            const height_p = parseFloat(document.getElementById("height").value);
                            const side_p = parseFloat(document.getElementById("side").value);
                            
                            switch(calculation) {
                                case 'area':
                                    solution = `S = base * height = ${base} * ${height_p} = ${base*height_p}`;
                                    break;
                                case 'perimeter':
                                    solution = `P = 2*(base + side) = 2*(${base} + ${side_p}) = ${2*(base + side_p)}`;
                                    break;
                                case 'height':
                                    solution = `h = S / base = ${base*height_p} / ${base} = ${height_p}`;
                                    break;
                            }
                            break;
                        }
                    }
                } catch(e) {
                    solution = "–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö";
                }
    
                document.getElementById("solution").innerText = solution;
                drawShape();
            }
    
            window.onload = showForm;
        </script>
    {% endblock %}</body></html>