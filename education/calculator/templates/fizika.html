{% extends "base.html" %}
{% load static %}

{% block title %}–§–∏–∑–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä{% endblock %}

{% block content %}
<style>

        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
        }

        .card {
            background: var(--bg-color); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ü–≤–µ—Ç */
            padding: 30px;
            border-radius: 16px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15); /* –ú—è–≥–∫–∞—è —Ç–µ–Ω—å */
            backdrop-filter: blur(8px); /* –õ–µ–≥–∫–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ –¥–ª—è —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ */
        }


        h2 {
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        label {
            font-size: 18px;
            font-weight: 600;
            color: #444;
            display: block;
            margin-bottom: 8px;
        }

        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            background: #f9f9f9;
            transition: border-color 0.3s;
        }

        select:focus, input:focus, textarea:focus {
            border-color: #007bff;
            outline: none;
            background: #fff;
        }

        button {
            width: 100%;
            background: #007bff;
            color: white;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #0056b3;
        }

        #result {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #28a745;
            margin-top: 15px;
        }

        .back-link {
            display: block;
            text-align: center;
            margin-top: 15px;
            font-size: 16px;
            color: #007bff;
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* –£–±–æ—Ä–∫–∞ –ª–∏—à–Ω–∏—Ö —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã SVG */
        .center-line {
            display: none;
        }  

        .title-container {
            display: none;
        }

        .paragraph-container {
            display: none;
        }

        .h2 {
            display: none;
        }

        .h3 {
            display: none;
        }

        #character-container {
            display: none;
        }

        .svg-container {
            display: none;
        }

</style>
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<div class="container">
    <div class="card">
        <h2>‚öõÔ∏è –§–∏–∑–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>

        <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º—É–ª—É:</label>
        <select id="formula" onchange="updateFields()">
            <option value="f_ma">F = m * a (–°–∏–ª–∞)</option>
            <option value="e_mgh">E = m * g * h (–≠–Ω–µ—Ä–≥–∏—è)</option>
            <option value="v_st">V = S / t (–°–∫–æ—Ä–æ—Å—Ç—å)</option>
            <option value="p_w">P = W / t (–ú–æ—â–Ω–æ—Å—Ç—å)</option>
            <option value="a_v">a = (v - v0) / t (–£—Å–∫–æ—Ä–µ–Ω–∏–µ)</option>
            <option value="v_c">V = ‚àö(2 * g * h) (–°–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è)</option>
            <option value="q_ohm">I = U / R (–ó–∞–∫–æ–Ω –û–º–∞)</option>
        </select>

        <div id="inputs"></div>
        <div id="formulaDescription"></div>

        <label>–í–≤–µ–¥–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –∑–∞–¥–∞—á–∏:</label>
        <textarea id="problem" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∑–∞–¥–∞—á—É..."></textarea>

        <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

        <div id="result"></div>

        <a href="{% url 'index' %}" class="back-link">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>

<script>
    const formulaDescriptions = {
        'f_ma': { description: "–°–∏–ª–∞ (F) —Ä–∞–≤–Ω–∞ –º–∞—Å—Å–µ (m), —É–º–Ω–æ–∂–µ–Ω–Ω–æ–π –Ω–∞ —É—Å–∫–æ—Ä–µ–Ω–∏–µ (a).", variables: ['m', 'a'] },
        'e_mgh': { description: "–≠–Ω–µ—Ä–≥–∏—è (E) —Ä–∞–≤–Ω–∞ –º–∞—Å—Å–µ (m), —É—Å–∫–æ—Ä–µ–Ω–∏—é —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è (g) –∏ –≤—ã—Å–æ—Ç–µ (h).", variables: ['m', 'g', 'h'] },
        'v_st': { description: "–°–∫–æ—Ä–æ—Å—Ç—å (V) —Ä–∞–≤–Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é (S), –¥–µ–ª–µ–Ω–Ω–æ–º—É –Ω–∞ –≤—Ä–µ–º—è (t).", variables: ['S', 't'] },
        'p_w': { description: "–ú–æ—â–Ω–æ—Å—Ç—å (P) —Ä–∞–≤–Ω–∞ —Ä–∞–±–æ—Ç–µ (W), –¥–µ–ª–µ–Ω–Ω–æ–π –Ω–∞ –≤—Ä–µ–º—è (t).", variables: ['W', 't'] },
        'a_v': { description: "–£—Å–∫–æ—Ä–µ–Ω–∏–µ (a) —Ä–∞–≤–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Å–∫–æ—Ä–æ—Å—Ç–∏ (v - v0) –¥–µ–ª–µ–Ω–Ω–æ–º—É –Ω–∞ –≤—Ä–µ–º—è (t).", variables: ['v', 'v0', 't'] },
        'v_c': { description: "–°–∫–æ—Ä–æ—Å—Ç—å —Ç–µ–ª–∞ (V) –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Å –≤—ã—Å–æ—Ç—ã (h) —Ä–∞–≤–Ω–∞ ‚àö(2 * g * h).", variables: ['g', 'h'] },
        'q_ohm': { description: "–¢–æ–∫ (I) —Ä–∞–≤–µ–Ω –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é (U), –¥–µ–ª–µ–Ω–Ω–æ–º—É –Ω–∞ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (R).", variables: ['U', 'R'] }
    };

    function updateFields() {
        const formula = document.getElementById('formula').value;
        const inputsDiv = document.getElementById('inputs');
        const descriptionDiv = document.getElementById('formulaDescription');
        inputsDiv.innerHTML = '';
        descriptionDiv.innerHTML = `<strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${formulaDescriptions[formula].description}`;
        
        formulaDescriptions[formula].variables.forEach(variable => {
            inputsDiv.innerHTML += `
                <label>${variable}:</label>
                <input type='number' id='${variable}'>
            `;
        });
    }

    function calculate() {
        const formula = document.getElementById('formula').value;
        let result = 0;
        let values = {};
        let allFilled = true;

        formulaDescriptions[formula].variables.forEach(variable => {
            let value = parseFloat(document.getElementById(variable).value);
            if (isNaN(value)) allFilled = false;
            values[variable] = value;
        });

        if (!allFilled) {
            alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
            return;
        }

        switch (formula) {
            case 'f_ma': result = values['m'] * values['a']; break;
            case 'e_mgh': result = values['m'] * values['g'] * values['h']; break;
            case 'v_st': result = values['S'] / values['t']; break;
            case 'p_w': result = values['W'] / values['t']; break;
            case 'a_v': result = (values['v'] - values['v0']) / values['t']; break;
            case 'v_c': result = Math.sqrt(2 * values['g'] * values['h']); break;
            case 'q_ohm': result = values['U'] / values['R']; break;
        }

        document.getElementById('result').innerText = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`;
    }

    updateFields();
</script>
{% endblock %}
